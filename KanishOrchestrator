{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/naileafalcon/project-kanish?scriptVersionId=289346935\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"code","execution_count":1,"id":"7f0e3509","metadata":{"execution":{"iopub.execute_input":"2025-12-31T06:27:28.417425Z","iopub.status.busy":"2025-12-31T06:27:28.416855Z","iopub.status.idle":"2025-12-31T06:27:28.426432Z","shell.execute_reply":"2025-12-31T06:27:28.42567Z"},"papermill":{"duration":0.014046,"end_time":"2025-12-31T06:27:28.427841","exception":false,"start_time":"2025-12-31T06:27:28.413795","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["üèóÔ∏è Preparando entorno en /kaggle/working/kanish-sdic-g...\n","‚ö†Ô∏è No se encontr√≥ el dataset de scripts en /kaggle/input/\n","üöÄ Entorno listo para el orquestador.\n"]}],"source":["import os\n","import shutil\n","\n","# Definir la ruta ra√≠z que espera tu orquestador\n","ROOT_DIR = \"/kaggle/working/kanish-sdic-g\"\n","\n","# 1. Crear la estructura de carpetas si no existe\n","folders = [\n","    \"src\", \"config\", \"data/raw\", \"data/processed\", \n","    \"data/dictionaries\", \"models/nllb-kanish-finetuned\"\n","]\n","\n","print(f\"üèóÔ∏è Preparando entorno en {ROOT_DIR}...\")\n","for folder in folders:\n","    os.makedirs(os.path.join(ROOT_DIR, folder), exist_ok=True)\n","\n","# 2. Mover tus scripts de src (asumiendo que los subiste como dataset)\n","# Cambia 'nombre-de-tu-dataset' por el nombre real en /kaggle/input/\n","src_input = \"/kaggle/input/kanish-src-v7/src\" \n","if os.path.exists(src_input):\n","    for item in os.listdir(src_input):\n","        s = os.path.join(src_input, item)\n","        d = os.path.join(ROOT_DIR, \"src\", item)\n","        if os.path.isfile(s):\n","            shutil.copy2(s, d)\n","    print(\"‚úÖ Scripts copiados a /src\")\n","else:\n","    print(\"‚ö†Ô∏è No se encontr√≥ el dataset de scripts en /kaggle/input/\")\n","\n","print(\"üöÄ Entorno listo para el orquestador.\")"]},{"cell_type":"code","execution_count":2,"id":"7a691bdb","metadata":{"execution":{"iopub.execute_input":"2025-12-31T06:27:28.432046Z","iopub.status.busy":"2025-12-31T06:27:28.431695Z","iopub.status.idle":"2025-12-31T06:27:28.440747Z","shell.execute_reply":"2025-12-31T06:27:28.440083Z"},"papermill":{"duration":0.012793,"end_time":"2025-12-31T06:27:28.442141","exception":false,"start_time":"2025-12-31T06:27:28.429348","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["üèóÔ∏è Preparando estructura 'kanish-sdic-g'...\n","üöö Organizando archivos...\n","\n","‚úÖ Repositorio listo. Sube la carpeta 'src' a Kaggle como Dataset.\n"]}],"source":["import os\n","import shutil\n","\n","# --- CONFIGURACI√ìN ---\n","ROOT_NAME = \"kanish-sdic-g\"\n","\n","# --- MAPEO DE ARCHIVOS BASADO EN TUS CAPTURAS ---\n","FILE_MOVES = {\n","    \"src\": [\n","        \"preprocessing.py\", \"04_tokenizer_kanish.py\", \"03_limpieza_kaggle.py\",\n","        \"kanish_engine.py\", \"kanish_inference.py\", \"marduk_validator.py\",\n","        \"neural_motor.py\", \"09_finetune_nllb.py\", \"graph_analyst.py\",\n","        \"07_cerebro_analitico.py\", \"gematria_registry.py\", \"semantic_hasher.py\",\n","        \"augmentation.py\", \"data_loader.py\", \"01_extraer.py\", \"entity_manager.py\",\n","        \"ontology_injector.py\", \"06_grafo_constructor.py\", \"05_pdf_miner.py\"\n","    ],\n","    \"config\": [\n","        \"master_cipher.json\", \"settings.json\", \"regex_rules.json\", \"OA_Lexicon_eBL.csv\"\n","    ],\n","    \"data/dictionaries\": [\n","        \"CAD_Dictionary.csv\", \"eBL_Dictionary.json\", \"lexicon\"\n","    ],\n","    \"data/raw\": [\n","        \"train.csv\", \"test.csv\", \"publications.csv\"\n","    ]\n","}\n","\n","def setup_repo():\n","    print(f\"üèóÔ∏è Preparando estructura '{ROOT_NAME}'...\")\n","    folders = [\"config\", \"src\", \"notebooks\", \"data/raw\", \"data/processed\", \n","               \"data/dictionaries\", \"models/nllb-kanish-finetuned\"]\n","    for f in folders:\n","        os.makedirs(os.path.join(ROOT_NAME, f), exist_ok=True)\n","\n","    # Crear archivos con UTF-8 para evitar errores de Windows (image_59f36c.png)\n","    with open(os.path.join(ROOT_NAME, \"README.md\"), \"w\", encoding=\"utf-8\") as f:\n","        f.write(\"# üèõÔ∏è Proyecto KANISH SDIC-G\\nDescodificaci√≥n determinista de cuneiforme asirio.\")\n","    \n","    with open(os.path.join(ROOT_NAME, \".gitignore\"), \"w\", encoding=\"utf-8\") as f:\n","        f.write(\"data/\\nmodels/\\n__pycache__/\\n*.csv\\n\")\n","\n","def move_assets():\n","    print(\"üöö Organizando archivos...\")\n","    for dest, sources in FILE_MOVES.items():\n","        for s in sources:\n","            # Buscar el archivo con extensiones comunes\n","            for ext in [\"\", \".py\", \".json\", \".csv\"]:\n","                src_file = s + ext\n","                if os.path.exists(src_file) and os.path.isfile(src_file):\n","                    target = os.path.join(ROOT_NAME, dest, os.path.basename(src_file))\n","                    print(f\"  > {src_file} -> {dest}\")\n","                    shutil.copy2(src_file, target)\n","                    break\n","\n","if __name__ == \"__main__\":\n","    setup_repo()\n","    move_assets()\n","    print(\"\\n‚úÖ Repositorio listo. Sube la carpeta 'src' a Kaggle como Dataset.\")"]},{"cell_type":"code","execution_count":3,"id":"6c988daa","metadata":{"execution":{"iopub.execute_input":"2025-12-31T06:27:28.446171Z","iopub.status.busy":"2025-12-31T06:27:28.445943Z","iopub.status.idle":"2025-12-31T06:27:28.457624Z","shell.execute_reply":"2025-12-31T06:27:28.456749Z"},"papermill":{"duration":0.015488,"end_time":"2025-12-31T06:27:28.458992","exception":false,"start_time":"2025-12-31T06:27:28.443504","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["üèóÔ∏è Creando estructura de directorios en: kanish-sdic-g\n","üöö Organizando archivos en sus respectivos m√≥dulos...\n","\n","‚úÖ REPOSITORIO 'kanish-sdic-g' LISTO PARA DESPLIEGUE.\n","Siguiente paso: Ejecuta el Pipeline desde 'src/main_pipeline.py' o 'entry_points.py'.\n"]}],"source":["import os\n","import shutil\n","\n","# --- CONFIGURACI√ìN ---\n","ROOT_NAME = \"kanish-sdic-g\"\n","\n","# --- CONTENIDOS EST√ÅTICOS (USANDO UTF-8 PARA EVITAR ERRORES DE UNICODE) ---\n","GITIGNORE_CONTENT = \"\"\"# Ignorar datos pesados\n","data/\n","input/\n","output/\n","dataset_aumentado/\n","golden_corpus/\n","*.csv\n","*.pdf\n","*.zip\n","\n","# Ignorar modelos entrenados\n","models/\n","kanish_brain_frozen/\n","trained_models/\n","*.pt\n","*.bin\n","*.safetensors\n","\n","# Ignorar archivos de sistema y python\n","__pycache__/\n","*.pyc\n",".ipynb_checkpoints/\n",".env\n",".venv/\n","ipython/\n","temp_data/\n","\"\"\"\n","\n","README_CONTENT = \"\"\"# Proyecto KANISH: SDIC-G Neuro-Symbolic Decoder\n","> Decoding the 4,000-year-old economic history of Kanesh using Graph Theory and Deterministic AI.\n","\n","Este repositorio implementa la arquitectura SDIC-G (Scientific Deterministic Inference for Cuneiform).\n","Basado en Gematria Computacional, Teor√≠a de Compiladores e IA H√≠brida.\n","\"\"\"\n","\n","# --- MAPEO DE ARCHIVOS BASADO EN TUS CAPTURAS (image_dd6366 y image_598634) ---\n","FILE_MOVES = {\n","    \"src\": [\n","        \"preprocessing.py\", \"04_tokenizer_kanish.py\", \"03_limpieza_kaggle.py\",\n","        \"kanish_engine.py\", \"kanish_inference.py\", \"main_pipeline.py\",\n","        \"marduk_validator.py\", \"neural_motor.py\", \"09_finetune_nllb.py\",\n","        \"graph_analyst.py\", \"07_cerebro_analitico.py\", \"gematria_registry.py\",\n","        \"semantic_hasher.py\", \"augmentation.py\", \"aumentation.py\",\n","        \"data_loader.py\", \"01_extraer.py\", \"entity_manager.py\",\n","        \"08_entrenar_gliner.py\", \"ontology_injector.py\", \"06_grafo_constructor.py\",\n","        \"cape_parser.py\", \"reconstructor.py\", \"05_pdf_miner.py\"\n","    ],\n","    \"config\": [\n","        \"master_cipher.json\", \"master_cipher\", \"settings.json\", \"settings\",\n","        \"regex_rules.json\", \"regexrules\", \"OA_Lexicon_eBL.csv\"\n","    ],\n","    \"data/dictionaries\": [\n","        \"CAD_Dictionary.csv\", \"lexicon\", \"eBL_Dictionary.json\", \"eBL_Dictionary\"\n","    ],\n","    \"data/raw\": [\n","        \"train.csv\", \"test.csv\", \"publications.csv\", \"reporte_anomalias_kaggle.txt\"\n","    ]\n","}\n","\n","def setup_workspace():\n","    \"\"\"Crea la estructura de carpetas necesaria para el SDIC-G.\"\"\"\n","    print(f\"üèóÔ∏è Creando estructura de directorios en: {ROOT_NAME}\")\n","    subfolders = [\n","        \"config\", \"src\", \"notebooks\", \n","        \"data/raw\", \"data/processed\", \"data/dictionaries\", \n","        \"models/nllb-kanish-finetuned\", \"legacy\"\n","    ]\n","    \n","    for f in subfolders:\n","        os.makedirs(os.path.join(ROOT_NAME, f), exist_ok=True)\n","\n","    # Crear archivos base forzando codificaci√≥n UTF-8 para evitar errores de Windows\n","    with open(os.path.join(ROOT_NAME, \".gitignore\"), \"w\", encoding=\"utf-8\") as f:\n","        f.write(GITIGNORE_CONTENT)\n","    \n","    with open(os.path.join(ROOT_NAME, \"README.md\"), \"w\", encoding=\"utf-8\") as f:\n","        f.write(README_CONTENT)\n","        \n","    with open(os.path.join(ROOT_NAME, \"requirements.txt\"), \"w\", encoding=\"utf-8\") as f:\n","        f.write(\"pandas\\ntorch\\ntransformers\\nnetworkx\\npython-louvain\\nneo4j\\ngliner\\ndatasets\\n\")\n","\n","def move_assets():\n","    \"\"\"Mueve los archivos detectados en la ra√≠z a sus nuevas carpetas.\"\"\"\n","    print(\"üöö Organizando archivos en sus respectivos m√≥dulos...\")\n","    for dest, sources in FILE_MOVES.items():\n","        for s in sources:\n","            # Buscamos el archivo con y sin extensiones comunes\n","            for ext in [\"\", \".py\", \".json\", \".csv\", \".txt\"]:\n","                src_file = s + ext\n","                if os.path.exists(src_file) and os.path.isfile(src_file):\n","                    target_path = os.path.join(ROOT_NAME, dest, os.path.basename(src_file))\n","                    print(f\"  [MOVING] {src_file} -> {dest}/\")\n","                    shutil.copy2(src_file, target_path)\n","                    break\n","\n","if __name__ == \"__main__\":\n","    try:\n","        setup_workspace()\n","        move_assets()\n","        print(f\"\\n‚úÖ REPOSITORIO '{ROOT_NAME}' LISTO PARA DESPLIEGUE.\")\n","        print(\"Siguiente paso: Ejecuta el Pipeline desde 'src/main_pipeline.py' o 'entry_points.py'.\")\n","    except Exception as e:\n","        print(f\"\\nüõë ERROR CR√çTICO: {str(e)}\")"]}],"metadata":{"kaggle":{"accelerator":"nvidiaTeslaT4","dataSources":[{"databundleVersionId":15061024,"isSourceIdPinned":false,"sourceId":121150,"sourceType":"competition"},{"datasetId":9053011,"sourceId":14197093,"sourceType":"datasetVersion"},{"datasetId":9068828,"sourceId":14216981,"sourceType":"datasetVersion"},{"datasetId":9119281,"sourceId":14297348,"sourceType":"datasetVersion"},{"datasetId":9126563,"sourceId":14297404,"sourceType":"datasetVersion"},{"datasetId":9126585,"sourceId":14297435,"sourceType":"datasetVersion"},{"datasetId":9163117,"sourceId":14350629,"sourceType":"datasetVersion"},{"datasetId":9163353,"sourceId":14350948,"sourceType":"datasetVersion"},{"isSourceIdPinned":true,"modelId":537419,"modelInstanceId":523415,"sourceId":690442,"sourceType":"modelInstanceVersion"},{"isSourceIdPinned":true,"modelId":539167,"modelInstanceId":525132,"sourceId":692580,"sourceType":"modelInstanceVersion"},{"isSourceIdPinned":true,"modelId":548405,"modelInstanceId":534781,"sourceId":704549,"sourceType":"modelInstanceVersion"}],"dockerImageVersionId":31234,"isGpuEnabled":true,"isInternetEnabled":true,"language":"python","sourceType":"notebook"},"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.12.12"},"papermill":{"default_parameters":{},"duration":2.691349,"end_time":"2025-12-31T06:27:28.677184","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2025-12-31T06:27:25.985835","version":"2.6.0"}},"nbformat":4,"nbformat_minor":5}