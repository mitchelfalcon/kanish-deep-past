{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/naileafalcon/project-kanish?scriptVersionId=288482206\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown"},{"cell_type":"code","execution_count":1,"id":"02121b94","metadata":{"_cell_guid":"b1076dfc-b9ad-4769-8c92-a6c4dae69d19","_uuid":"8f2839f25d086af736a60e9eeb907d3b93b6e0e5","execution":{"iopub.execute_input":"2025-12-26T05:38:50.466177Z","iopub.status.busy":"2025-12-26T05:38:50.465831Z","iopub.status.idle":"2025-12-26T05:38:50.480631Z","shell.execute_reply":"2025-12-26T05:38:50.479261Z"},"papermill":{"duration":0.022399,"end_time":"2025-12-26T05:38:50.482996","exception":false,"start_time":"2025-12-26T05:38:50.460597","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["ğŸŸ¢ INICIANDO MODO LECTURA (CEREBRO CONGELADO)...\n","âš ï¸ ALERTA: No encontrÃ© el archivo .json del grafo.\n","   AsegÃºrate de que el dataset 'kanish-knowledge-graph' contenga un archivo .json\n","   Archivos actuales en carpeta: ['__notebook__.ipynb']\n"]}],"source":["import os\n","import json\n","import sys\n","\n","# --- CONFIGURACIÃ“N OFFLINE (SIN NEO4J) ---\n","WORKING_DIR = \"/kaggle/working\"\n","print(\"ğŸŸ¢ INICIANDO MODO LECTURA (CEREBRO CONGELADO)...\")\n","\n","# 1. BUSCAR EL JSON DEL CEREBRO\n","# Buscamos en la carpeta de trabajo donde el script anterior copiÃ³ los archivos\n","brain_file = None\n","\n","# Escanear recursivamente en busca del JSON\n","for root, dirs, files in os.walk(WORKING_DIR):\n","    for file in files:\n","        if file.endswith(\".json\") and (\"brain\" in file or \"frozen\" in file or \"graph\" in file):\n","            brain_file = os.path.join(root, file)\n","            break\n","    if brain_file: break\n","\n","# 2. CARGAR EL CEREBRO A MEMORIA\n","if brain_file:\n","    print(f\"ğŸ§  CEREBRO DETECTADO: {brain_file}\")\n","    try:\n","        with open(brain_file, 'r', encoding='utf-8') as f:\n","            kanish_brain = json.load(f)\n","        \n","        # Verificar estructura\n","        node_count = len(kanish_brain.get('nodes', [])) if isinstance(kanish_brain, dict) else len(kanish_brain)\n","        \n","        print(f\"\\nâœ… Â¡Ã‰XITO! SISTEMA KANISH ONLINE.\")\n","        print(f\"ğŸ“Š Datos cargados: {node_count} nodos listos para consulta.\")\n","        print(\"ğŸš€ Ya puedes ejecutar tus funciones de traducciÃ³n usando la variable 'kanish_brain'.\")\n","        \n","    except Exception as e:\n","        print(f\"âŒ Error leyendo el archivo JSON: {e}\")\n","else:\n","    print(\"âš ï¸ ALERTA: No encontrÃ© el archivo .json del grafo.\")\n","    print(\"   AsegÃºrate de que el dataset 'kanish-knowledge-graph' contenga un archivo .json\")\n","    print(\"   Archivos actuales en carpeta:\", os.listdir(WORKING_DIR))"]},{"cell_type":"code","execution_count":2,"id":"6dde6d5f","metadata":{"execution":{"iopub.execute_input":"2025-12-26T05:38:50.488758Z","iopub.status.busy":"2025-12-26T05:38:50.48843Z","iopub.status.idle":"2025-12-26T05:38:52.355809Z","shell.execute_reply":"2025-12-26T05:38:52.354644Z"},"papermill":{"duration":1.873171,"end_time":"2025-12-26T05:38:52.358297","exception":false,"start_time":"2025-12-26T05:38:50.485126","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["ğŸ­ INICIANDO FÃBRICA DE CONOCIMIENTO (MODO FULL)...\n","ğŸ” Buscando archivos de diccionario en todo el dataset...\n","  Found: train.csv\n","  Found: OA_Lexicon_eBL.csv\n","  Found: eBL_Dictionary.csv\n","  Found: train.csv\n","\n","ğŸ“š Procesando 4 archivos masivos...\n","  -> Asimilando: train.csv...\n","  -> Asimilando: OA_Lexicon_eBL.csv...\n","  -> Asimilando: eBL_Dictionary.csv...\n","  -> Asimilando: train.csv...\n","\n","ğŸ’¾ GUARDANDO NUEVO CEREBRO...\n","âœ… Â¡Ã‰XITO! Nuevo cerebro generado en: /kaggle/working/kanish_brain_FULL.json\n","ğŸ“Š Total de conceptos aprendidos: 20779\n","ğŸš€ AHORA TIENES EL CEREBRO COMPLETO.\n"]}],"source":["import os\n","import pandas as pd\n","import json\n","import sys\n","\n","# --- CONFIGURACIÃ“N DE GENERACIÃ“N MASIVA ---\n","print(\"ğŸ­ INICIANDO FÃBRICA DE CONOCIMIENTO (MODO FULL)...\")\n","kanish_brain = {} \n","\n","# 1. ESPECIFICAR RUTAS CLAVE\n","# Buscamos en tus inputs\n","input_dirs = [\"/kaggle/input/pkanish\", \"/kaggle/input/kanishdataset\"]\n","target_files = []\n","\n","print(\"ğŸ” Buscando archivos de diccionario en todo el dataset...\")\n","\n","for input_dir in input_dirs:\n","    if os.path.exists(input_dir):\n","        for root, dirs, files in os.walk(input_dir):\n","            for file in files:\n","                # Buscamos archivos que parezcan diccionarios o datos de entrenamiento\n","                if file.endswith(\".csv\") and (\"dict\" in file.lower() or \"lexicon\" in file.lower() or \"train\" in file.lower()):\n","                    full_path = os.path.join(root, file)\n","                    target_files.append(full_path)\n","                    print(f\"  Found: {file}\")\n","\n","# 2. PROCESAMIENTO ROBUSTO (AquÃ­ estaba el error antes)\n","if target_files:\n","    print(f\"\\nğŸ“š Procesando {len(target_files)} archivos masivos...\")\n","    \n","    for csv_path in target_files:\n","        print(f\"  -> Asimilando: {os.path.basename(csv_path)}...\")\n","        try:\n","            # Intentamos leer el CSV. 'on_bad_lines' ayuda si hay filas corruptas\n","            df = pd.read_csv(csv_path, on_bad_lines='skip')\n","            \n","            # Detectar columnas automÃ¡ticamente (IngenierÃ­a inversa bÃ¡sica)\n","            cols = df.columns\n","            if len(cols) >= 2:\n","                # Asumimos Columna 0 = Palabra, Columna 1 = TraducciÃ³n/Significado\n","                key_col = cols[0]\n","                val_col = cols[1]\n","                \n","                # Convertir a diccionario y mezclar con el cerebro existente\n","                # dropna() elimina filas vacÃ­as para ahorrar espacio\n","                new_data = dict(zip(df[key_col].astype(str), df[val_col].astype(str)))\n","                kanish_brain.update(new_data)\n","                \n","        except Exception as e:\n","            print(f\"     âš ï¸ Error leyendo {os.path.basename(csv_path)}: {e}\")\n","\n","    # 3. GUARDADO FINAL\n","    brain_size = len(kanish_brain)\n","    output_file = \"/kaggle/working/kanish_brain_FULL.json\"\n","    \n","    if brain_size > 0:\n","        print(f\"\\nğŸ’¾ GUARDANDO NUEVO CEREBRO...\")\n","        with open(output_file, 'w', encoding='utf-8') as f:\n","            json.dump(kanish_brain, f, ensure_ascii=False, indent=None) # indent=None para ahorrar espacio\n","            \n","        print(f\"âœ… Â¡Ã‰XITO! Nuevo cerebro generado en: {output_file}\")\n","        print(f\"ğŸ“Š Total de conceptos aprendidos: {brain_size}\")\n","        print(\"ğŸš€ AHORA TIENES EL CEREBRO COMPLETO.\")\n","    else:\n","        print(\"âš ï¸ ALERTA: No se pudieron extraer datos vÃ¡lidos.\")\n","\n","else:\n","    print(\"âŒ ERROR: No encontrÃ© los archivos CSV. Verifica que 'pkanish' estÃ© conectado correctamente.\")"]},{"cell_type":"code","execution_count":3,"id":"83778324","metadata":{"execution":{"iopub.execute_input":"2025-12-26T05:38:52.363852Z","iopub.status.busy":"2025-12-26T05:38:52.363494Z","iopub.status.idle":"2025-12-26T05:38:52.408706Z","shell.execute_reply":"2025-12-26T05:38:52.407398Z"},"papermill":{"duration":0.050891,"end_time":"2025-12-26T05:38:52.411155","exception":false,"start_time":"2025-12-26T05:38:52.360264","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["ğŸ§  Conectando con KANISH CEREBRO FULL...\n","âœ… Â¡Conectado! Neuronas activas: 20779\n","\n","--- ğŸ” MUESTRA DE CONOCIMIENTO ---\n","ğŸ”¤ Å arru-duri I  â¡ï¸  nan\n","ğŸ”¤ nabÄhu I  â¡ï¸  \"to bark\" j/NB G (u/u) of dog, demon Gtn iter. of G D ~ G\n","ğŸ”¤ patÄ«ru I  â¡ï¸  \"sack\" O/jB of leather\n","ğŸ”¤ dÄrÃ»taÅ¡ I  â¡ï¸  \"for ever\" jB;\n","ğŸ”¤ mukabbiru I  â¡ï¸  \"boaster, exaggerator\" OB lex.;\n"]}],"source":["import json\n","import random\n","\n","# Ruta del cerebro NUEVO que acabas de crear\n","ruta_cerebro_full = \"/kaggle/working/kanish_brain_FULL.json\"\n","\n","print(f\"ğŸ§  Conectando con KANISH CEREBRO FULL...\")\n","\n","try:\n","    with open(ruta_cerebro_full, 'r', encoding='utf-8') as f:\n","        cerebro = json.load(f)\n","    \n","    print(f\"âœ… Â¡Conectado! Neuronas activas: {len(cerebro)}\")\n","    \n","    # Vamos a ver 5 ejemplos aleatorios de lo que aprendiÃ³\n","    print(\"\\n--- ğŸ” MUESTRA DE CONOCIMIENTO ---\")\n","    claves = list(cerebro.keys())\n","    for _ in range(5):\n","        palabra = random.choice(claves)\n","        print(f\"ğŸ”¤ {palabra}  â¡ï¸  {cerebro[palabra]}\")\n","\n","except Exception as e:\n","    print(f\"âŒ Error: {e}\")\n","    print(\"AsegÃºrate de haber corrido el bloque anterior que genera 'kanish_brain_FULL.json'\")"]}],"metadata":{"kaggle":{"accelerator":"none","dataSources":[{"databundleVersionId":15061024,"sourceId":121150,"sourceType":"competition"},{"datasetId":9119281,"sourceId":14287115,"sourceType":"datasetVersion"},{"datasetId":9126178,"sourceId":14296866,"sourceType":"datasetVersion"},{"modelId":544118,"modelInstanceId":530174,"sourceId":698879,"sourceType":"modelInstanceVersion"}],"dockerImageVersionId":31234,"isGpuEnabled":false,"isInternetEnabled":true,"language":"python","sourceType":"notebook"},"kernelspec":{"display_name":"Python 3","language":"python","name":"python3"},"language_info":{"codemirror_mode":{"name":"ipython","version":3},"file_extension":".py","mimetype":"text/x-python","name":"python","nbconvert_exporter":"python","pygments_lexer":"ipython3","version":"3.12.12"},"papermill":{"default_parameters":{},"duration":6.475373,"end_time":"2025-12-26T05:38:52.934259","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2025-12-26T05:38:46.458886","version":"2.6.0"}},"nbformat":4,"nbformat_minor":5}